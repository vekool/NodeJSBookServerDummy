# Quick Test Script
# Copy and paste these commands to test the server

# 1. Test GET all books (public)
curl http://localhost:3000/posts

# 2. Test GET single book (public)
curl http://localhost:3000/posts/1

# 3. Login and get token
curl -X POST http://localhost:3000/auth/login -H "Content-Type: application/json" -d "{\"username\": \"testuser\", \"password\": \"testpass\"}"

# 4. After login, copy the token and set it here:
# SET TOKEN=your_token_here

# 5. Test CREATE book (protected) - Replace YOUR_TOKEN_HERE with actual token
curl -X POST http://localhost:3000/posts -H "Authorization: Bearer YOUR_TOKEN_HERE" -H "Content-Type: application/json" -d "{\"title\": \"New Test Book\", \"body\": \"This is a test book description\", \"userId\": 1}"

# 6. Test UPDATE book (protected)
curl -X PUT http://localhost:3000/posts/1 -H "Authorization: Bearer YOUR_TOKEN_HERE" -H "Content-Type: application/json" -d "{\"title\": \"Updated Title\", \"body\": \"Updated description\", \"userId\": 1}"

# 7. Test DELETE book (protected)
curl -X DELETE http://localhost:3000/posts/11 -H "Authorization: Bearer YOUR_TOKEN_HERE"

# 8. Test 404 error
curl http://localhost:3000/posts/9999

# 9. Test 500 error
curl http://localhost:3000/error/500

# 10. Test unauthorized access (should fail)
curl -X POST http://localhost:3000/posts -H "Content-Type: application/json" -d "{\"title\": \"Test\", \"body\": \"Test\"}"

# 11. Logout
curl -X POST http://localhost:3000/auth/logout -H "Authorization: Bearer YOUR_TOKEN_HERE"

# 12. Reset data to initial state
curl -X POST http://localhost:3000/reset
